# OSARA: Open Source Accessibility for the REAPER Application
# SConscript for architecture-specific building of the source
# Author: James Teh <jamie@nvaccess.org>
# Copyright 2015 NV Access Limited
# License: GNU General Public License version 2.0

Import("env")
env.Append(CPPFLAGS="/EHsc", CPPPATH=("#include", "#include/WDL"))
# We always want debug symbols.
env.Append(PDB="${TARGET}.pdb")
# having symbols usually turns this off, but we have no need for unused symbols.
env.Append(LINKFLAGS='/OPT:REF')

env.SharedLibrary(
	target="reaper_osara%s" % env["dllSuffix"],
	source=[
		"reaper_osara.cpp",
		"paramsUi.cpp",
		"peakWatcher.cpp",
		env.RES("reaper_osara.rc"),
	],
	LIBS=[
		"user32",
		"ole32",
		"oleacc",
		"OleAut32",
	],
)
